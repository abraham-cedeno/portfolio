<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DYDCJ786D8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DYDCJ786D8');
</script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>IBM CLV case</title>

  <!-- Javascript -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Montserrat&family=Sacramento&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  
     <!-- Favicon -->
  <link rel="icon" href="favicon.ico">
  
  <!-- CSS file -->
  <link rel="stylesheet" href="css/style_index_pagina_web.css">

  <!-- Fontawesome -->
  <script src="https://kit.fontawesome.com/94c008222b.js" crossorigin="anonymous"></script>

</head>

<body>


<!--NavBar-->
<nav class="navbar navbar-expand-lg sticky-top navbar-dark bg-dark">
  <a class="navbar-brand ml-5" href="index-english.html">ABRAHAM</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
    <ul class="navbar-nav ml-auto">
      <li class="navbar-item pl-5" id="item-1">
        <a class="nav-link" href="index-english.html#sobre-mi"> About me </a>
      </li>
      <li class="navbar-item pl-5" id="item-2">
        <a class="nav-link" href="index-english.html#Curriculum">CV </a>
      </li>
      <li class="navbar-item pl-5" id="item-3">
        <a class="nav-link" href="index-english.html#portafolio">Portfolio</a>
      </li>
      <li class="navbar-item pl-5" id="item-4">
        <a class="nav-link" href="index-english.html#contactar"> Contact</a>
      </li>
    </ul>
  </div>
</nav>


  <!--WhatsApp-->
<div class="icon-bar">
  <a href="https://wa.link/jg3p18" class="letra-escribeme"><h5 class="escribeme">Escríbeme al WhatsApp</h5></a>
  <a href="https://wa.link/jg3p18" class="whatsapp"><i class="fa-brands fa-whatsapp fa-2x"></i></a>
</div>


<br>

<br>

<br>
<br>

<br>

<br>
<br>

<br>






<div class="desc_box2 snipcss-r7xWC">
  <div class="title">
    A Brilliant Way to Boost Your Customer Retention
    <span class="blue">
      .
    </span>
  </div>
  
  <div class="tags">
    Predictive modeling
  </div>
</div>











































<div class="content_area snipcss-zM5ET">

  

  <div>
    <div class="video">
      <img src="images/clv1.png">
  
    </div>
    </div>
    <div class="visible sc-kgoBCf jBhoOa">
      <p class="project_url_p">
        <strong>
          Project URL in R:
        </strong>
        <a class="project_url" href="CLV-case.html">
          Customer_Lifetime_Value_Analysis.notbeook-in-R.html
        </a>
        <br>
        <br>
        <strong>
          Tools used:
        </strong>
        RStudio, Microsoft Excel, Power Query, Tableau
      </p>





      <div class="section-separator"></div>







      <h2>Section 1: Introduction to the project</h2>
      <div class="blue_line snipcss-V6C8f">
      </div>
<br>
<br>
      <h3>Problem description</h3>
      <div class="blue_line17 snipcss-V6C8f">
      </div>
      <p>
        Customer retention is a key challenge for businesses, and understanding the lifetime value of customers (Customer Lifetime Value, CLV) is crucial for developing effective retention and growth strategies.
    </p>

    <p>
      IBM Watson Analytics company wants to make informed decisions about customer acquisition, retention, and development to optimize resources and maximize profitability.
         </p>




    <h3>Business Objective</h3>
    <div class="blue_line18 snipcss-V6C8f">
    </div>
    <p>
      "Create a predictive model that considers the provided demographic and purchasing behavior data to estimate the Customer Lifetime Value, and improve customer retention programs."
    </p>


      <div class="video_section">
        <div class="video">
          <img src="images/clv2.jpg" class="bikes1">
        </div>
      </div>

 


      <div class="section-separator"></div>







    <h2>Sección 2: Data Description</h2>
    <div class="blue_line snipcss-V6C8f">
    </div>


   <br>
   <br>

    <h3>Features to be provided for model development</h3>
    <div class="blue_line20 snipcss-V6C8f">
    </div>
    <p>
      For the project, historical data was provided in a .csv file with 24 columns and 9134 observations. This file contains various demographic characteristics, behavior, policy information, and vehicle details of the customers.
       </p>

        
       <table>
        <thead>
            <tr>
                <th>Columna</th>
                <th>Type of data</th>
                <th>Subtype of data</th>
                <th>Ranges o Categories</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1. Customer</td>
                <td>Categorical</td>
                <td>Nominal</td>
                <td>ID de 7 caracteres que combina números y letras</td>
            </tr>
            <tr>
                <td>2. State</td>
                <td>Categorical</td>
                <td>Nominal</td>
                <td>Arizona, California, Nevada, Oregon, Washington</td>
            </tr>
            <tr>
                <td>3. Customer Lifetime Value</td>
                <td>Numerical</td>
                <td>Continuous</td>
                <td>1,898.00 a 83,325.38</td>
            </tr>
            <tr>
                <td>4. Response</td>
                <td>Categorical</td>
                <td>Nominal</td>
                <td>Yes, No</td>
            </tr>
            <tr>
                <td>5. Coverage</td>
                <td>Categorical</td>
                <td>Ordinal</td>
                <td>Basic, Extended, Premium</td>
            </tr>
            <tr>
                <td>6. Education</td>
                <td>Categorical</td>
                <td>Ordinal</td>
                <td>Bachelor, College, Doctor, High School or Below, Master</td>
            </tr>
            <tr>
                <td>7. Effective to date</td>
                <td>Numerical</td>
                <td>Discrete</td>
                <td>1/1/2011 a 2/28/2011</td>
            </tr>
            <tr>
                <td>8. Employment Status</td>
                <td>Categorical</td>
                <td>Nominal</td>
                <td>Disabled, Employed, Medical Leave, Retired, Unemployed</td>
            </tr>
            <tr>
                <td>9. Gender</td>
                <td>Categorical</td>
                <td>Nominal</td>
                <td>F, M</td>
            </tr>
            <tr>
                <td>10. Income</td>
                <td>Numerical</td>
                <td>Continuous</td>
                <td>0 a 99981</td>
            </tr>
            <tr>
                <td>11. Location code</td>
                <td>Categorical</td>
                <td>Nominal</td>
                <td>Rural, Suburban, Urban</td>
              </tr>
              <tr>
                  <td>12. Marital Status</td>
                  <td>Categorical</td>
                  <td>Nominal</td>
                  <td>Divorced, Married, Single</td>
              </tr>
              <tr>
                  <td>13. Monthly Premium Auto</td>
                  <td>Numerical</td>
                  <td>Continuous</td>
                  <td>61 a 298</td>
              </tr>
              <tr>
                  <td>14. Months Since Last Claim</td>
                  <td>Numerical</td>
                  <td>Discrete</td>
                  <td>0 a 35</td>
              </tr>
              <tr>
                  <td>15. Months Since Policy Inception</td>
                  <td>Numerical</td>
                  <td>Discrete</td>
                  <td>0 a 99</td>
              </tr>
              <tr>
                  <td>16. Number of Open Complaints</td>
                  <td>Numerical</td>
                  <td>Discrete</td>
                  <td>0 a 5</td>
              </tr>
              <tr>
                  <td>17. Number of Policies</td>
                  <td>Numerical</td>
                  <td>Discrete</td>
                  <td>1 a 9</td>
              </tr>
              <tr>
                  <td>18. Policy type</td>
                  <td>Categorical</td>
                  <td>Nominal</td>
                  <td>Corporate Auto, Personal Auto, Special Auto</td>
              </tr>
              <tr>
                  <td>19. Policy</td>
                  <td>Categorical</td>
                  <td>Nominal</td>
                  <td>Corporate L1, Corporate L2, Corporate L3, Personal L1, Personal L2, Personal L3, Special L1, Special L2, Special L3</td>
              </tr>
              <tr>
                  <td>20. Renew Offer Type</td>
                  <td>Categorical</td>
                  <td>Nominal</td>
                  <td>Offer1, Offer2, Offer3, Offer4</td>
              </tr>
              <tr>
                  <td>21. Sales channel</td>
                  <td>Categorical</td>
                  <td>Nominal</td>
                  <td>Agent, Branch, Call Center, Web</td>
              </tr>
              <tr>
                  <td>22. Total Claim Amount</td>
                  <td>Numerical</td>
                  <td>Continuous</td>
                  <td>0.099007 a 2893.239678</td>
              </tr>
              <tr>
                  <td>23. Vehicle Class</td>
                  <td>Categorical</td>
                  <td>Nominal</td>
                  <td>Four-Door Car, Luxury Car, Luxury SUV, Sports Car, SUV, Two-Door Car</td>
              </tr>
              <tr>
                  <td>24. Vehicle Size</td>
                  <td>Categorical</td>
                  <td>Ordinal</td>
                  <td>Large, Medsize, Small</td>
              </tr>
          </tbody>
      </table>






      <div class="section-separator"></div>


      <h2>Sección 3: Findings</h2>
      <div class="blue_line snipcss-V6C8f">
      </div>
<br>

      <h3>Coverage vs CLV</h3>
      <div class="blue_line22 snipcss-V6C8f">
      </div>
      
      <br>

    
      <div class="video_section">
        <div class="video">
          <img src="images/Findings1.png" class="bikes2">
        </div>
      </div>


      <b>Observations </b>
      <ul>
        <li class="data">
          <b>Correlation between coverage and CLV</b>
          There is a positive correlation between premium coverage and CLV, as evidenced by the boxplots.
          </li>
    </ul>





<br>

    <h3>Vehicle class vs CLV</h3>
    <div class="blue_line23 snipcss-V6C8f">
    </div>
    
    <br>

  
    <div class="video_section">
      <div class="video">
        <img src="images/Findings2.png" class="bikes2">
      </div>
    </div>


    <b>Observations </b>
    <ul>
      <li class="data">
        <b>Correlation between vehicle class and CLV</b>
        Customers with luxury vehicles have a higher CLV, indicating that the vehicle class has an impact on CLV.
            </li>
  </ul>

<br>






<h3>Monthly insurance payment vs CLV:</h3>
<div class="blue_line24 snipcss-V6C8f">
</div>

<br>


<div class="video_section">
  <div class="video">
    <img src="images/Findings3.png" class="bikes2">
  </div>
</div>

<div class="video_section">
  <div class="video">
    <img src="images/Findings4.png" class="bikes2">
  </div>
</div>


<b>Observations</b>
<ul>
  <li class="data">
    <b>Highest correlation with CLV:</b>
    The correlation matrix shows that the monthly insurance payment has the highest numerical correlation with CLV.
    </li>
  <li class="data">
    <b>Clear trend in the scatterplot: </b>
    it is observed that the higher a client's monthly payment, the higher their CLV.
  </li>
</ul>







<br>

<h3>Total claimed vs CLV</h3>
<div class="blue_line25 snipcss-V6C8f">
</div>

<br>

<div class="video_section">
  <div class="video">
    <img src="images/Findings5.png" class="bikes2">
  </div>
</div>


<b>Observations</b>
<ul>
  <li class="data">
    <b>Correlation between Total claimed and CLV:</b>
    Although not as evident in the scatterplot, there is a correlation between the total claimed and CLV, corroborated by the simple linear regression model.
    </li>
</ul>











<br>

<h3>Number of insurances vs CLV</h3>
<div class="blue_line26 snipcss-V6C8f">
</div>

<br>

<div class="video_section">
  <div class="video">
    <img src="images/Findings8.png" class="bikes2">
  </div>
</div>

<div class="video_section">
  <div class="video">
    <img src="images/Findings9.png" class="bikes2">
  </div>
</div>



<b>Observations </b>
<ul>
  <li class="data">
    <b> Atypical increase in CLV for customers with 2 insurances:</b>
    An unusual increase in CLV is observed for these customers.
  </li>
  <li class="data">
    <b>Loss of linearity for customers with 2 insurances:</b>
    The behavior of clients without 2 insurances is linear.
  </li>
</ul>





<div class="section-separator"></div>


<h2>Section 4: Building the predictive model</h2>
<div class="blue_line snipcss-V6C8f">
</div>
<br>

<h3>Multiple linear regression</h3>
<div class="blue_line27 snipcss-V6C8f">
</div>

<br>

<h4>Multicollinearity</h4>
Multicollinearity was detected in some terms (VIF > 5.0).

<div class="video_section">
  <div class="video">
    <img src="images/Findings10.png" class="bikes2">
  </div>
</div>

<h4>Stepwise regression</h4>
This method was used to select variables with a greater effect and eliminate multicollinearity.

<div class="video_section">
  <div class="video">
    <img src="images/Findings12.png" class="bikes2">
  </div>
</div>

<div class="video_section">
  <div class="video">
    <img src="images/Findings11.png" class="bikes2">
  </div>
</div>


<h4>10-fold cross-validation results</h4>

<div class="video_section">
  <div class="video">
    <img src="images/Findings13.png" class="bikes2">
  </div>
</div>

<h4>Residuals absolute value VS predicted value</h4>
<div class="video_section">
  <div class="video">
    <img src="images/Findings14.png" class="bikes2">
  </div>
</div>

<h4>Out-of-sample performance</h4>
<div class="video_section">
  <div class="video">
    <img src="images/Findings15.png" class="bikes2">
  </div>
</div>

<div class="video_section">
  <div class="video">
    <img src="images/Findings16.png" class="bikes2">
  </div>
</div>


<div class="section-separator"></div>



<h2>Section 5: Improved model</h2>
<div class="blue_line snipcss-V6C8f">
</div>
<br>


<h3>K Nearest Neighbor.</h3>
<div class="blue_line62 snipcss-V6C8f">
</div>

<br>

Previously, We found that only when number of policies is 2 the relationship between Customer_Lifetime_Value (target value) and Monthly_Premium_Auto (a feature) vary hugely. We suspect that the model could improve it’s accuaracy by trying using an algorithm that could catch this non linear relationship.
<br>
<br>

<h4>Out-of-sample performance </h4>

<div class="video_section">
  <div class="video">
    <img src="images/Findings17.png" class="bikes2">
  </div>
</div>

We get a hugely superior model in the holdout sample.
<br><br>

<h4>Visualizing Observed vs predicted values on holdout sample</h4>
<div class="video_section">
  <div class="video">
    <img src="images/Findings18.png" class="bikes2">
  </div>
</div>

<h3>Setting KNN as feature engine</h3>
Now let’s try setting KNN as a feature and use it in the multiple linear regression model to see if that could improve the model even further.

<br>
<br>

<h4>10 fold cross validation model</h4>
<div class="video_section">
  <div class="video">
    <img src="images/Findings19.png" class="bikes2">
  </div>
</div>

This is a huge improvement. Now we are talking! But let’s not get ahead of ourselves, is important to check other important factors to validate the model like the VIF and most importantly, assessing the model in the holdout sample.

<br>
<br>

<h4>Assessing the model on new data (holdout sample)</h4>

<div class="video_section">
  <div class="video">
    <img src="images/Findings20.png" class="bikes2">
  </div>
</div>

Now this is a very good model with a whooping 0.68131 R-squared in the holdout sample.
<br>
<br>

<h4>Visualizing Observed vs predicted values on holdout sample</h4>

<div class="video_section">
  <div class="video">
    <img src="images/Findings31.png" class="bikes2">
  </div>
</div>

As it can be seen, the model is very accurate in predicting the customer lifetime value.
<br>
<br>

<h4>Visualizing the absolute value of the residuals vs the predicted values</h4>

<div class="video_section">
  <div class="video">
    <img src="images/Findings32.png" class="bikes2">
  </div>
</div>




<div class="section-separator"></div>


<h2>Section 6: Conclusion</h2>
<div class="blue_line snipcss-V6C8f">
</div>

<p>Our initial linear regression model yielded an out-of-sample RMSE of 6433.889 and an R^2 of 0.1738. Although the model's precision was limited, the insights derived from the coefficients can still be used to inform business decisions aimed at increasing CLV. </p>

<p>The second model significantly improved upon the first by employing an ensemble approach, which incorporated the K Nearest Neighbors (KNN) result as an additional feature. The final model achieved an RMSE of 3994.279 and an R^2 of 0.6813.</p>

<p>The substantial improvement in our model's performance can be attributed to the detection of an unusual pattern among clients holding two policies, which our original linear regression model failed to capture. It is recommended to further investigate this behavior to identify the underlying cause, which may lead to the development of a more accurate model for predicting CLV. </p>


      </div>
      </div>
    </div>
  </div>
</div>




















<section class="section6">
  <div class="container-fluid">
    <div class="bottom-container">
      <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6">
          <h2 class="experiencia-foot">Abraham C.</h2>
        </div>

        <div class="col-lg-6 col-md-6 col-sm-6 mi-contacto">


          <a class="footer-link"> ―CONTACTO</a>
          <br>
          <a class="footer" href="https://wa.link/jg3p18">+507 69827535</a>
<br>
          <a class="footer" href="mailto:abraham-cedeno@hotmail.com">abraham-cedeno@hotmail.com</a>
          <br>
          <a class="footer" href="https://www.linkedin.com/in/abraham-cede%C3%B1o/?locale=es_ES">LinkedIn</a>
          <br>
          <a class="footer" href="https://github.com/abraham-cedeno" target="_blank">GitHub</a>
        </div>

      </div>
      <p class="pie">©2023 Abraham Cedeño Levy</p>
    </div>
  </div>
</section>



</body>

</html>
